# lvalue-rvalue，左值和右值

## 概念
直观上，左值是等号左边的值，右值是等号右边的值，这种说说法不准确，只适用于部分场景。  
本质上，左值在内存中有空间（能取地址），而右值则不是。  
右值：字面量、临时变量。  
左值：除了右值（字面量和临时变量）就是左值。

## 如何判断一个变量是左值还是右值？  
规则：
* 左值引用(&)只能接受左值
* 右值引用(&&)只能接受右值   
## 如何同时接受左值和右值
* 常左值引用
## 代码
```
    int GetValue() { return 10; }    // 返回临时值
    void SetValue1(int& i) { }       // 左值引用
    void SetValue2(int&& i) { }      // 右值引用
    void SetValue3(const int& i) { } // 常左值引用
    int i = 10;

    // 通过左值引用判断左值
    SetValue1(i);          // OK，左值
    SetValue1(10);         // Error，字面量，右值
    SetValue1(GetValue()); // Error，临时值，右值

    // 通过右值引用判断右值 
    SetValue3(i);          // Error，左值
    SetValue3(10);         // OK，字面量，右值
    SetValue3(GetValue()); // OK，临时值，右值

    // 同时接受左值和右值
    SetValue2(i);          // OK
    SetValue2(10);         // OK
    SetValue2(GetValue()); // OK
```
若在上述三个函数重载的情况下，左值匹配左值引用；右值（优先）匹配右值引用，若无右值引用，右值匹配常左值引用。
## 右值引用有什么用？
* move语义  
在设计到关于临时对象时，右值引用和移动语义允许我们避免不必要的拷贝。我们不想拷贝将要消失的临时对象，所以这个临时对象的资源可以被我们用作于其他的对象。
* 做优化  
对临时变量做一些我们需要做的事情。
